<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,initial-scale=1.0,width=device-width"/>
    <!-- viewport：缩放比例，APP默认与设备保持一致 -->
    <!-- form-detection，格式设置，默认情况下，让手机设备不直接识别手机号、邮箱、密码、日期、地址等 -->
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>广场舞</title>
    <link rel="stylesheet" type="text/css" href="../css/api.css" />
    <link rel="stylesheet" type="text/css" href="../css/aui.css" />
    <style type="text/css">


    </style>
</head>
<body>

<div class="aui-content">
    <ul id="list" class="aui-user-view">
        <template v-for='item in items'>
        <li class="aui-user-view-cell aui-img" v-on:click="fnLoadMusic(item.url);">
            <span style="display: none;">{{item.url}}</span>
            <img class="aui-img-object aui-pull-left" v-bind:src="'http://www.weilh.vip' + (item.smallimg)" v-bind:alt="item.smallimg">
            <div class="aui-img-body">
                <span>{{item.title}}</span>
                <p class='aui-ellipsis-1'>{{item.description}}</p>
            </div>
        </li>
        </template>
        
    </ul>
</div>


</body>
<script type="text/javascript" src="../script/api.js"></script>
<script type="text/javascript" src="../script/aui-alert.js"></script>
<script type="text/javascript" src="../script/vue.js"></script>




<script type="text/javascript">
    function fnLoadMusic(url){

        // 打开新的win窗体
        api.openWin({
            name: 'music',
            url: './win_music.html',
            pageParam: {
                // 左边是参数的名称，右边是参数的值
                url: url
            }
        });
    }



    function fnLoadList(){
        // 向服务器请求数据
        api.ajax({
            url: 'http://weilh.vip/admin/news/api',
            method: 'get',
            data: {
                values: {
                    name: 'haha'
                }
            }
        }, function(ret, err) {
            if (ret) {
                // api.alert({ msg: JSON.stringify(ret) });
                // 使用 vuejs
                var vm = new Vue({
                    el: '#list',
                    data: {
                        items: ret
                    },
                     methods: {
                        say: function (message) {
                            // var url = document.getElementById()
                            alert(message)
                        }
                    }
                });
            } else {
                api.alert({ msg: JSON.stringify(err) });
            }
        });
    }

    apiready = function(){
        fnLoadList();

    }
        
</script>

</html>